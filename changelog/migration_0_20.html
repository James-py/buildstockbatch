

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>What’s new in buildstockbatch 0.20? &mdash; buildstockbatch 0.20 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="0.19.1 Changelog" href="changelog_0_19_1.html" />
    <link rel="prev" title="Changes and Migration" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> buildstockbatch
          

          
          </a>

          
            
            
              <div class="version">
                0.20
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_defn.html">Project Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samplers/index.html">Samplers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow_generators/index.html">Workflow Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filtering_logic.html">Filtering Logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run_sims.html">Running a Project</a></li>
</ul>
<p class="caption"><span class="caption-text">Changes &amp; Migration</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Changes and Migration</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#current-migration-guide">Current Migration Guide</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">What’s new in buildstockbatch 0.20?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general">General</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#change-logs">Change logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#development">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#older-migration-guides">Older Migration Guides</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">buildstockbatch</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Changes and Migration</a> &raquo;</li>
        
      <li>What’s new in buildstockbatch 0.20?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/changelog/migration_0_20.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="what-s-new-in-buildstockbatch-0-20">
<h1>What’s new in buildstockbatch 0.20?<a class="headerlink" href="#what-s-new-in-buildstockbatch-0-20" title="Permalink to this headline">¶</a></h1>
<div class="admonition-about-this-document admonition">
<p class="admonition-title">About this Document</p>
<p>This document describes changes between buildstockbatch version 0.19 and buildstockbatch version 0.20</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This guide introduces what’s new in buildstockbatch version 0.20 and also
documents changes which affect users migrating their analyses from 0.19.</p>
<p>Please carefully review the section on schema changes as the minimum schema
version has been updated to the new version, 0.3, and there are
non-backwards-compatible changes in the schema update.</p>
</div>
<div class="section" id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<div class="section" id="schema-version-update">
<h3>Schema Version Update<a class="headerlink" href="#schema-version-update" title="Permalink to this headline">¶</a></h3>
<p>The input schema has been updated to version 0.3. Project configuration files
will need to be upgraded to use the new format. The <code class="docutils literal notranslate"><span class="pre">schema_version</span></code> key now
needs to be a string, so put some quotes around the version number.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="s">&#39;0.3&#39;</span>
</pre></div>
</div>
<p>There are no more <code class="docutils literal notranslate"><span class="pre">stock_type</span></code>, <code class="docutils literal notranslate"><span class="pre">sampling_algorithm</span></code>, or <code class="docutils literal notranslate"><span class="pre">downselect</span></code>
keys. This information is defined in the new <code class="docutils literal notranslate"><span class="pre">sampler</span></code> and <code class="docutils literal notranslate"><span class="pre">workflow</span></code> keys.</p>
</div>
<div class="section" id="sampler-specification">
<h3>Sampler Specification<a class="headerlink" href="#sampler-specification" title="Permalink to this headline">¶</a></h3>
<p>The sampler now has its own section in the configuration file. In it, you
specify which kind of sampler to use and the arguments to pass to it. These
arguments used to be scattered all around the project configuration file and it
caused some confusion when arguments would only apply to some kinds of samplers.
They are now consolidated under the <code class="docutils literal notranslate"><span class="pre">sampler</span></code> key and each sampler type
specifies its own options. Complete documentation of the available samplers and
their arguments is at <a class="reference internal" href="../samplers/index.html"><span class="doc">Samplers</span></a>.</p>
<p>Here are a few examples for common scenarios:</p>
<div class="section" id="residential-quota-sampling">
<h4>Residential Quota Sampling<a class="headerlink" href="#residential-quota-sampling" title="Permalink to this headline">¶</a></h4>
<p>See <a class="reference internal" href="../samplers/residential_quota.html"><span class="doc">Residential Quota Sampler</span></a>.</p>
<p>Old Spec:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="nt">stock_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">residential</span>
<span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">sampling_algorithm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">quota</span>
  <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">350000</span>
</pre></div>
</div>
<p>New Spec:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="s">&#39;0.3&#39;</span>
<span class="nt">sampler</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">residential_quota</span>
  <span class="nt">args</span><span class="p">:</span>
    <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">350000</span>
</pre></div>
</div>
</div>
<div class="section" id="residential-quota-with-downselecting">
<h4>Residential Quota with Downselecting<a class="headerlink" href="#residential-quota-with-downselecting" title="Permalink to this headline">¶</a></h4>
<p>Downselecting is no longer a separate config item, it is implemented in a
different sampler type. See <a class="reference internal" href="../samplers/residential_quota_downselect.html"><span class="doc">Residential Quota Downselect Sampler</span></a>.</p>
<p>Old Spec:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="nt">stock_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">residential</span>
<span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">sampling_algorithm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">quota</span>
  <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">350000</span>
<span class="nt">downselect</span><span class="p">:</span>
  <span class="nt">logic</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Geometry Building Type RECS|Single-Family Detached</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Vacancy Status|Occupied</span>
  <span class="nt">resample</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
<p>New Spec:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="s">&#39;0.3&#39;</span>
<span class="nt">sampler</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">residential_quota_downselect</span>
  <span class="nt">args</span><span class="p">:</span>
    <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">350000</span>
    <span class="nt">logic</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Geometry Building Type RECS|Single-Family Detached</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">Vacancy Status|Occupied</span>
    <span class="nt">resample</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</pre></div>
</div>
</div>
<div class="section" id="precomputed-sampling">
<h4>Precomputed Sampling<a class="headerlink" href="#precomputed-sampling" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">baseline.precomputed_sample</span></code> key has been removed and the precomputed
sampling is its own sampler type. Downselecting is no longer permitted with a
precomputed sample. If you want to downselect, please modify your buildstock.csv
file to only include the buildings you want in your sample. See
<a class="reference internal" href="../samplers/precomputed.html"><span class="doc">Precomputed Sampler</span></a>.</p>
<p>Old Spec:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="nt">stock_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">residential</span>
<span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">precomputed_sample</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/buildstock.csv</span>
  <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">350000</span>
</pre></div>
</div>
<p>New Spec:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="s">&#39;0.3&#39;</span>
<span class="nt">sampler</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">precomputed</span>
  <span class="nt">args</span><span class="p">:</span>
    <span class="nt">sample_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">path/to/buildstock.csv</span> <span class="c1"># n_datapoints determined from csv file</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="workflow-generator-specification">
<h3>Workflow Generator Specification<a class="headerlink" href="#workflow-generator-specification" title="Permalink to this headline">¶</a></h3>
<p>The workflow generator has changed as well. Many inputs to the workflow were
previously at the top level in the project configuration file. This was again
confusing because different config entries only applied to certain workflow
generators. In previous versions, the appropriate workflow generator was
inferred based on the <code class="docutils literal notranslate"><span class="pre">stock_type</span></code> key. Now it is explicitly defined and the
arguments to be passed to it are defined under the <code class="docutils literal notranslate"><span class="pre">workflow_generator</span></code> key.
See <a class="reference internal" href="../workflow_generators/index.html"><span class="doc">Workflow Generators</span></a>.</p>
<p>Old Spec:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.2</span>
<span class="nt">stock_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">residential</span>
<span class="nt">timeseries_csv_export</span><span class="p">:</span>
  <span class="nt">reporting_frequency</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Hourly</span>
  <span class="nt">include_enduse_subcategories</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>New Spec:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">schema_version</span><span class="p">:</span> <span class="s">&#39;0.3&#39;</span>
<span class="nt">workflow_generator</span><span class="p">:</span>
  <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">residential_default</span>
  <span class="nt">args</span><span class="p">:</span>
    <span class="nt">timeseries_csv_export</span><span class="p">:</span>
      <span class="nt">reporting_frequency</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Hourly</span>
      <span class="nt">include_enduse_subcategories</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</div>
<div class="section" id="aws-emr-configuration-name-changes">
<h3>AWS EMR Configuration Name Changes<a class="headerlink" href="#aws-emr-configuration-name-changes" title="Permalink to this headline">¶</a></h3>
<p>In an effort to use more appropriate language, in the <a class="reference internal" href="../project_defn.html#aws-config"><span class="std std-ref">AWS Configuration</span></a>, we
renamed the following keys under <code class="docutils literal notranslate"><span class="pre">aws.emr</span></code>:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 49%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Old Name</p></th>
<th class="head"><p>New Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>master_instance_type</p></td>
<td><p>manager_instance_type</p></td>
</tr>
<tr class="row-odd"><td><p>slave_instance_type</p></td>
<td><p>worker_instance_type</p></td>
</tr>
<tr class="row-even"><td><p>slave_instance_count</p></td>
<td><p>worker_instance_count</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="changelog_0_19_1.html" class="btn btn-neutral float-right" title="0.19.1 Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Changes and Migration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Copyright 2021 The Alliance for Sustainable Energy.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>