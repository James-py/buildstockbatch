

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>What’s new in buildstockbatch 0.18? &mdash; buildstockbatch 0.20 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="What’s new in buildstockbatch 0.19?" href="migration_0_19.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> buildstockbatch
          

          
          </a>

          
            
            
              <div class="version">
                0.20
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_defn.html">Project Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../samplers/index.html">Samplers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow_generators/index.html">Workflow Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filtering_logic.html">Filtering Logic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../run_sims.html">Running a Project</a></li>
</ul>
<p class="caption"><span class="caption-text">Changes &amp; Migration</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Changes and Migration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#current-migration-guide">Current Migration Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#change-logs">Change logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#development">Development</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#older-migration-guides">Older Migration Guides</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="migration_0_19.html">What’s new in buildstockbatch 0.19?</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">What’s new in buildstockbatch 0.18?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general">General</a></li>
<li class="toctree-l4"><a class="reference internal" href="#new-features-and-improvements">New Features and Improvements</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">buildstockbatch</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Changes and Migration</a> &raquo;</li>
        
      <li>What’s new in buildstockbatch 0.18?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/changelog/migration_0_18.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="what-s-new-in-buildstockbatch-0-18">
<h1>What’s new in buildstockbatch 0.18?<a class="headerlink" href="#what-s-new-in-buildstockbatch-0-18" title="Permalink to this headline">¶</a></h1>
<div class="admonition-about-this-document admonition">
<p class="admonition-title">About this Document</p>
<p>This document describes changes between buildstockbatch version 0.17 and buildstockbatch version 0.18</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This guide introduces what’s new in buildstockbatch version 0.18 and also documents changes which affect users migrating
their analyses from 0.17.</p>
<p>Please carefully review the section on schema changes as the minimum schema version has been updated to the new version,
0.2, and there are non-backwards-compatible changes in the schema update.</p>
</div>
<div class="section" id="general">
<h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<div class="section" id="changelog-and-migration-documentation">
<h3>Changelog and Migration Documentation<a class="headerlink" href="#changelog-and-migration-documentation" title="Permalink to this headline">¶</a></h3>
<p>We have added in changelogs and migration guides to assist folks updating from one version of buildstockbatch to the
next! Please review these as they will significantly minimize annoyance and churn. All new pull requests will
additionally need to add a changelog entry to the changelog_dev.rst file (a template exists in said file) so that upon
release of the next version we can drag and drop in the relevant updates and create a migration guide.</p>
</div>
<div class="section" id="schema-version-update">
<h3>Schema Version Update<a class="headerlink" href="#schema-version-update" title="Permalink to this headline">¶</a></h3>
<p id="migration-0-18-schema-label">Schema version 0.2 has been release and is required for version 0.18. There are several non-backwards-compatible changes
that have been implemented. Happily these do not require significant changes in configuration yamls! So, what changes
were made?</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">schema_version</span></code> key, previously not required, is now required. This is important since we now have more than a
single schema version to keep track of.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">n_datapoints</span></code> key in the <code class="docutils literal notranslate"><span class="pre">baseline</span></code> section, previously not required, is now required.</p></li>
<li><p>The minimum version for the <code class="docutils literal notranslate"><span class="pre">schema_version</span></code> key for this release (0.18) has been updated to <code class="docutils literal notranslate"><span class="pre">0.2</span></code> which will
force all project yamls to be updated.</p></li>
<li><p>The precomputed sampling interface has been overhauled and the desired sampler now must be specified. When trying to
use a precomputed buildstock.csv file use the <code class="docutils literal notranslate"><span class="pre">precomputed</span></code> sampler; for the default residential quota sampler use
<code class="docutils literal notranslate"><span class="pre">quota</span></code>; for commercial dynamic sampling (please don’t do this here btw ~Ry) use <code class="docutils literal notranslate"><span class="pre">sobol</span></code>.</p></li>
</ul>
<p>All users should fall into one of two camps at this point: running the residential quota sampler or specifying the
buildstock.csv file to be executed. Three before and afters are presented:</p>
<div class="section" id="using-the-quota-sampler">
<h4>Using the quota sampler<a class="headerlink" href="#using-the-quota-sampler" title="Permalink to this headline">¶</a></h4>
<p>The relevant <em>before</em> section should look something like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1234</span>
</pre></div>
</div>
<p>This needs to be updated to include the <code class="docutils literal notranslate"><span class="pre">schema_version</span></code> key, and the <code class="docutils literal notranslate"><span class="pre">sampling_algorithm</span></code> key. The new schema would
now look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">sampling_algorithm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">quota</span>
  <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1234</span>
<span class="nt">schema_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.2</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-precomputed-sample-residential">
<h4>Using a precomputed sample - Residential<a class="headerlink" href="#using-a-precomputed-sample-residential" title="Permalink to this headline">¶</a></h4>
<p>The relevant <em>before</em> section should look something like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">buildstock_csv</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/buildstock.csv</span>
</pre></div>
</div>
<p>This needs to be updated to include the <code class="docutils literal notranslate"><span class="pre">schema_version</span></code> key, the <code class="docutils literal notranslate"><span class="pre">sampling_algorithm</span></code> key, the <code class="docutils literal notranslate"><span class="pre">n_datapoints</span></code>
key, and <code class="docutils literal notranslate"><span class="pre">buildstock_csv</span></code> needs to be changed to <code class="docutils literal notranslate"><span class="pre">precomputed_sample</span></code>. The new schema would now look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">sampling_algorithm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">precomputed</span>
  <span class="nt">precomputed_sample</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/buildstock.csv</span>
  <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1234</span>
<span class="nt">schema_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.2</span>
</pre></div>
</div>
</div>
<div class="section" id="using-a-precomputed-sample-commercial">
<h4>Using a precomputed sample - Commercial<a class="headerlink" href="#using-a-precomputed-sample-commercial" title="Permalink to this headline">¶</a></h4>
<p>The relevant <em>before</em> section should look something like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">sampling_algorithm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">precomputed</span>
  <span class="nt">precomputed_sample</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/buildstock.csv</span>
</pre></div>
</div>
<p>This needs to be updated to include the <code class="docutils literal notranslate"><span class="pre">schema_version</span></code> key and the <code class="docutils literal notranslate"><span class="pre">n_datapoints</span></code> key. The new schema would now
look like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">baseline</span><span class="p">:</span>
  <span class="nt">sampling_algorithm</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">precomputed</span>
  <span class="nt">precomputed_sample</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/path/to/buildstock.csv</span>
  <span class="nt">n_datapoints</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1234</span>
<span class="nt">schema_version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.2</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="samplers-precomputed-and-quota">
<h3>Samplers - Precomputed and Quota<a class="headerlink" href="#samplers-precomputed-and-quota" title="Permalink to this headline">¶</a></h3>
<p>Previously the file specified by the <code class="docutils literal notranslate"><span class="pre">buildstock_csv</span></code> key was dealt with by the
<code class="xref py py-func docutils literal notranslate"><span class="pre">run_sampling()</span></code> function in the base <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildStockBatchBase</span></code> class. This is no longer
the case, but the associated functionality has been retained, now in the <code class="xref py py-class docutils literal notranslate"><span class="pre">PrecomputedSampler</span></code> class
which inherits from the <code class="xref py py-class docutils literal notranslate"><span class="pre">BuildStockSampler</span></code> class. This cleans up some structural inconsistencies and
allows for a more standard interface.</p>
</div>
</div>
<div class="section" id="new-features-and-improvements">
<h2>New Features and Improvements<a class="headerlink" href="#new-features-and-improvements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="comstock">
<span id="change-65"></span><h3>ComStock<a class="headerlink" href="#comstock" title="Permalink to this headline">¶</a></h3>
<p>Release 0.18 merges in the long-running ComStock support branch, allowing (finally) for ComStock runs to be performed
using the major release packages. At this time ComStock is still in a Beta stage and not nearly as ‘fire-and-forget’ as
ResStock and is not currently supported AT ALL outside of the ComStock team. Additional documentation is being built
out in the ComStock repo - please review and update as issues and resolutions and common mistakes are determined. As we
continue to uncover issues we will delegate them to either the ComStock repo or the repo on an ad-hoc basis.</p>
<p>No specific actions are required for using release 0.18 with ComStock, except for the need to (as always) correctly
set up your YAML configuration file!</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="migration_0_19.html" class="btn btn-neutral float-left" title="What’s new in buildstockbatch 0.19?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Copyright 2021 The Alliance for Sustainable Energy.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>