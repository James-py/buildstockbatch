buildstock_directory: str()
project_directory: str(required=True)
weather_files_path: str(required=False)
weather_files_url: str(required=False)
stock_type: enum('residential', 'commercial', required=True)
eagle: include('hpc-spec', required=False)
output_directory: str(required=False)
sys_image_dir: str(required=False)
baseline: include('sim-spec', required=True)
timeseries_csv_export: include('timeseries_csv_export-spec',required=False)
upgrades: list(include('upgrade-spec'), required=False)
downselect: include('downselect-spec',required=False)
postprocessing: include('postprocessing-spec', required=False)
residential_simulation_controls: include('residential-simulation-spec', required=False)
reporting_measures: list(str(), required=False)
schema_version: num(required=False)
---
hpc-spec:
  account: str(required=True)
  minutes_per_sim: int(max=120, required=False)
  n_jobs: int(required=False)
  postprocessing: include('hpc-postprocessing-spec', required=False)
  sampling: include('sampling-spec', required=False)

hpc-postprocessing-spec:
  time: int(required=True)
  n_workers: int(required=False)

sampling-spec:
  time: int(required=True)

sim-spec:
  n_datapoints: int(required=False)
  n_buildings_represented: int(required=False)
  measures: list(include('measure-spec'), required=False)
  precomputed_sample: str(required=False)
  buildstock_csv: str(required=False)
  skip_sims: bool(required=False)
  measures_to_ignore: list(str(), required=False)
  sampling_algorithm: enum('sobol', required=False)

measure-spec:
  measure_dir_name: str(required=True)
  arguments: map(required=False)


upgrade-spec:
  upgrade_name: str(required=True)
  options: list(include('option-spec'), required=True)
  package_apply_logic: include('apply-logic-spec', required=False)
  reference_scenario: str(required=False)

option-spec:
  option: include('param_option-spec', required=True)
  apply_logic: include('apply-logic-spec', required=False)
  costs: list(include('cost-spec'), required=False)
  lifetime: num(required=False)

param_option-spec: str(exclude=':(){}[]')

apply-logic-spec: >
  any(
    list(
      include('and-spec'),
      include('or-spec'),
      include('not-spec'),
      include('param_option-spec'),
    ),
    include('and-spec'),
    include('or-spec'),
    include('not-spec'),
    include('param_option-spec')
  )
or-spec:
  or: list(include('apply-logic-spec'))
and-spec:
  and: list(include('apply-logic-spec'))
not-spec:
  not: any(include('apply-logic-spec'), list(include('apply-logic-spec')))

cost-spec:
  value: num(required=True)
  multiplier: >
    enum("",
    "Fixed (1)",
    "Wall Area, Above-Grade, Conditioned (ft^2)",
    "Wall Area, Above-Grade, Exterior (ft^2)",
    "Wall Area, Below-Grade (ft^2)",
    "Floor Area, Conditioned (ft^2)",
    "Floor Area, Attic (ft^2)",
    "Floor Area, Lighting (ft^2)",
    "Roof Area (ft^2)",
    "Window Area (ft^2)",
    "Door Area (ft^2)",
    "Duct Surface Area (ft^2)",
    "Size, Heating System (kBtu/h)",
    "Size, Cooling System (kBtu/h)",
    "Size, Water Heater (gal)")

timeseries_csv_export-spec:
  reporting_frequency: enum("Timestep", "Hourly", "Daily", "Monthly", "Runperiod", required=True)
  include_enduse_subcategories: bool(required=True)
  output_variables: str(required=False)

downselect-spec:
  resample: bool(required=False)
  logic: include('apply-logic-spec', required=False)

postprocessing-spec:
  aws: include('aws-postprocessing-spec', required=False)
  aggregate_timeseries: bool(required=False)

aws-postprocessing-spec:
  region_name: str(required=False)
  s3: include('s3-aws-postprocessing-spec', required=True)
  athena: include('athena-aws-postprocessing-spec', required=False)

s3-aws-postprocessing-spec:
  bucket: str(required=True)
  prefix: str(required=True)

athena-aws-postprocessing-spec:
  glue_service_role: str(required=False)
  database_name: str(required=True)
  max_crawling_time: num(requried=False)

residential-simulation-spec:
  timesteps_per_hr: num(required=False)
  begin_month: int(required=False, min=1, max=12)
  begin_day_of_month: int(required=False, min=1, max=31)
  end_month: int(required=False, min=1, max=12)
  end_day_of_month: int(required=False, min=1, max=31)
  calendar_year: int(required=False, min=1900, max=2100)